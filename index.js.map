{"version":3,"file":"index.js","sources":["../src/js/render-funktion.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  return `\n  <li class=\"gallery-card\">\n    <a href=\"${imgInfo.largeImageURL}\">\n      <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" />\n    </a>\n    <p>likes ${imgInfo.likes}</p>\n    <p>views ${imgInfo.views}</p>\n    <p>comments ${imgInfo.comments}</p>\n    <p>downloads ${imgInfo.downloads}</p>\n  </li>\n  `;\n};\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchEl = (searchedQuery, page) => {\n  const axiosOptions = {\n    params: {\n      key: '45457641-ce63f5c92c9f6494e7448790b',\n      q: searchedQuery,\n      orientation: 'horizontal',\n      page: page,\n      per_page: 15,\n      image_type: 'photo',\n      safesearch: 'true',\n    },\n  };\n\n  return axios.get(``, axiosOptions);\n};\n\n// export const fetchEl = query => {\n//   return fetch(\n//     `https://pixabay.com/api/?key=45457641-ce63f5c92c9f6494e7448790b&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`\n//   ).then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.status);\n//     }\n//     return response.json();\n//   });\n// };\n","import { createGalleryCardTemplate } from './js/render-funktion';\nimport { fetchEl } from './js/pixabay-api';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst formEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtnEl = document.querySelector('.load-more');\nlet currentPages = 1;\nlet searchValue = '';\n\nconst startLoader = () => {\n  loader.classList.remove('is-hidden');\n};\nconst finishLoader = () => {\n  loader.classList.add('is-hidden');\n};\n\nconst onSearchFormEl = async event => {\n  try {\n    event.preventDefault();\n    currentPages = 1;\n\n    searchValue = formEl.elements.user_query.value;\n\n    startLoader();\n\n    const response = await fetchEl(searchValue, currentPages);\n    console.log(response);\n\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      galleryEl.innerHTML = '';\n      formEl.reset();\n      finishLoader();\n      return;\n    }\n\n    const galleryCardsTemplate = response.data.hits\n      .map(imgDetails => createGalleryCardTemplate(imgDetails))\n      .join('');\n\n    galleryEl.innerHTML = galleryCardsTemplate;\n    formEl.reset();\n    finishLoader();\n    const lightbox = new SimpleLightbox('.js-gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n    loadMoreBtnEl.classList.remove('is-hidden');\n  } catch (error) {\n    console.log(error);\n  }\n};\nconst onLoadMoreClick = async event => {\n  try {\n    currentPages++;\n\n    const response = await fetchEl(searchValue, currentPages);\n    const galleryCardsTemplate = response.data.hits\n      .map(imgDetails => createGalleryCardTemplate(imgDetails))\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n    const { height: cardHeight } =\n      galleryEl.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n    const totalPages = Math.ceil(response.data.totalHits / 15);\n    if (currentPages >= totalPages) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      iziToast.info({\n        title: 'info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nformEl.addEventListener('submit', onSearchFormEl);\nloadMoreBtnEl.addEventListener('click', onLoadMoreClick);\n"],"names":["createGalleryCardTemplate","imgInfo","axios","fetchEl","searchedQuery","page","axiosOptions","formEl","galleryEl","loader","loadMoreBtnEl","currentPages","searchValue","startLoader","finishLoader","onSearchFormEl","event","response","iziToast","galleryCardsTemplate","imgDetails","SimpleLightbox","error","onLoadMoreClick","cardHeight","totalPages"],"mappings":"owBAAO,MAAMA,EAA4BC,GAChC;AAAA;AAAA,eAEMA,EAAQ,aAAa;AAAA,sCACEA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA,eAEjEA,EAAQ,KAAK;AAAA,eACbA,EAAQ,KAAK;AAAA,kBACVA,EAAQ,QAAQ;AAAA,mBACfA,EAAQ,SAAS;AAAA;AAAA,ICPpCC,EAAM,SAAS,QAAU,2BAElB,MAAMC,EAAU,CAACC,EAAeC,IAAS,CAC9C,MAAMC,EAAe,CACnB,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,YAAa,aACb,KAAMC,EACN,SAAU,GACV,WAAY,QACZ,WAAY,MACb,CACL,EAEE,OAAOH,EAAM,IAAI,GAAII,CAAY,CACnC,ECVMC,EAAS,SAAS,cAAc,iBAAiB,EACjDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAgB,SAAS,cAAc,YAAY,EACzD,IAAIC,EAAe,EACfC,EAAc,GAElB,MAAMC,EAAc,IAAM,CACxBJ,EAAO,UAAU,OAAO,WAAW,CACrC,EACMK,EAAe,IAAM,CACzBL,EAAO,UAAU,IAAI,WAAW,CAClC,EAEMM,EAAiB,MAAMC,GAAS,CACpC,GAAI,CACFA,EAAM,eAAc,EACpBL,EAAe,EAEfC,EAAcL,EAAO,SAAS,WAAW,MAEzCM,IAEA,MAAMI,EAAW,MAAMd,EAAQS,EAAaD,CAAY,EAGxD,GAFA,QAAQ,IAAIM,CAAQ,EAEhBA,EAAS,KAAK,KAAK,SAAW,EAAG,CACnCC,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UAClB,CAAO,EACDV,EAAU,UAAY,GACtBD,EAAO,MAAK,EACZO,IACA,MACD,CAED,MAAMK,EAAuBF,EAAS,KAAK,KACxC,IAAIG,GAAcpB,EAA0BoB,CAAU,CAAC,EACvD,KAAK,EAAE,EAEVZ,EAAU,UAAYW,EACtBZ,EAAO,MAAK,EACZO,IACiB,IAAIO,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GACpB,CAAK,EACQ,QAAO,EAChBX,EAAc,UAAU,OAAO,WAAW,CAC3C,OAAQY,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,EACMC,EAAkB,MAAMP,GAAS,CACrC,GAAI,CACFL,IAEA,MAAMM,EAAW,MAAMd,EAAQS,EAAaD,CAAY,EAClDQ,EAAuBF,EAAS,KAAK,KACxC,IAAIG,GAAcpB,EAA0BoB,CAAU,CAAC,EACvD,KAAK,EAAE,EAEVZ,EAAU,mBAAmB,YAAaW,CAAoB,EAC9D,KAAM,CAAE,OAAQK,CAAY,EAC1BhB,EAAU,kBAAkB,wBAC9B,OAAO,SAAS,CACd,IAAKgB,EAAa,EAClB,SAAU,QAChB,CAAK,EACD,MAAMC,EAAa,KAAK,KAAKR,EAAS,KAAK,UAAY,EAAE,EACrDN,GAAgBc,IAClBf,EAAc,UAAU,IAAI,WAAW,EACvCQ,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6DACT,SAAU,UAClB,CAAO,EAEJ,OAAQI,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,EAEAf,EAAO,iBAAiB,SAAUQ,CAAc,EAChDL,EAAc,iBAAiB,QAASa,CAAe"}